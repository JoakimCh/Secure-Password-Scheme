<!doctype html>
<html lang="en">
<meta charset=utf-8>
<title>JLC's SPS PWA</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="An application to manage your passwords securely and accessible to all your devices without needing to store them anywhere or sync any data since they're procedurally generated on demand.">
<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="apple-touch-icon.png">
<meta name="theme-color" content="#121212">
<link rel="stylesheet" href="theme.css">
<link id="css_light" rel="stylesheet" href="lights_on.css" disabled>
<!-- Feel free to inspect the code, all of it is in the script below: -->
<script type="module" src="code.js"></script>
<script type="module"> // module to control "lights on" / "lights off"
  const stylesheet = document.getElementById('css_light')
  const lightSwitch = document.getElementById('btn_light')
  function colorSchemeChange(dark) {
    if (typeof dark == 'string') dark = dark == 'true'
    stylesheet.disabled = dark
    lightSwitch.innerText = dark ? 'Lights on' : 'Lights off'
    localStorage.setItem('dark', dark)
  }
  const mql = window.matchMedia('(prefers-color-scheme: dark)')
  mql.addEventListener('change', e => colorSchemeChange(e.matches))
  colorSchemeChange(localStorage.getItem('dark') ?? mql.matches)
  lightSwitch.addEventListener('click', () => colorSchemeChange(!stylesheet.disabled))
</script>
<button id="btn_light" tabindex="-1" style="position: absolute">Lights on</button>
<button id="btn_install" tabindex="-1" style="position: absolute; right: 8px" hidden>Install</button>
<div id="con_main">
  <h1 class="long">JLC's Secure Password Scheme PWA</h1>
  <h1 class="short">JLC's SPS PWA</h1>
  <small class="expTitle">JLC's Secure Password Scheme PWA</small>
  <p class="noTopMargin">An application to manage your passwords in a super secure way (accessible to all your devices) without needing to store them anywhere or sync any data; since they're procedurally generated (on demand) directly on your device. You only need to remember your master password and from it super strong passwords can be generated for every service you want to use with this scheme.</p>
  <fieldset><legend>Personal seed:</legend>
    <form id="frm_personalSeed" autocomplete="off" class="grid">
      <label>
        Personal ID or name:<br>
        <input type="text" name="inp_person" required>
      </label>
      <label>
        Your birthdate:<br>
        <input type="number" name="inp_birthdate" placeholder="ddmmyyyy" required>
      </label>
      <label>
        Your master password:<br>
        <input type="password" name="inp_master" required>
      </label>
      <p class="noYMargins spanGridCols">These personal details are used to make any passwords generated by you fully unique from those generated by anyone else.</p>
      <div class="spanGridCols" style="display: flex; flex-wrap: wrap; gap: 10px;">
        <div style="width: 95px;">
          <canvas id="idCanvas" width="95" height="95"></canvas>
          <button id="btn_downloadId" tabindex="-1" type="button" style="width: 95px;">Download</button>
        </div>
        <p class="noTopMargin" style="flex: 200px">This icon represents a "fingerprint" of your personal seed. By keeping a copy of it you can easily check (by method of visual comparison) if you entered the right details. To keep it take a picture of it with your phone or download it.</p>
      </div>
      <button type="submit" hidden></button>
    </form>
  </fieldset>
  <fieldset><legend>Service seed:</legend>
    <form id="frm_serviceSeed" autocomplete="off" class="grid">
      <label>
        Generate password for:<br>
        <input type="text" name="inp_service" required>
        <p class="smallTopMargin">The title of the website or service to generate a password for, keep it simple so its easy to remember! E.g. "facebook", "gmail", "microsoft" (it's case-insensitive).</p>
      </label>
      <label>For login (optional):<br>
        <input type="text" name="inp_login">
        <p class="smallTopMargin">If you have more than one login for the service you can specify which to create a password for if you want them to have separate passwords. It could e.g. be your username or e-mail address.</p>
      </label>
      <label>
        Password iteration:<br>
        <input type="number" name="inp_iteration" value="0" required>
        <p class="smallTopMargin">Sometimes you need to have a new fresh password, to do this just increment the password iteration. But please remember which iteration you used for this service! If you forgot it you can just try several until you find the correct one though.</p>
      </label>
      <button type="submit" hidden></button>
    </form>
  </fieldset>
  <button id="btn_generate" type="submit" style="width: 100%; margin: 10px 0; height: 40px;">Generate a secure password</button>
  <fieldset id="con_generatedPasswords"><legend>Generated passwords:</legend></fieldset>
  <fieldset>
    <legend id="shrLabel">Shredder countdown:</legend>
    <input aria-labelledby="shrLabel" type="range" id="inp_countdown" tabindex="-1" min="0" max="180" value="0">
    <p class="noTopMargin">A "shredder" will count down from 3 minutes to 0 before clearing all your data, this is for your safety in case you forget to close this application.</p>
    <div class="centerFlex"><button id="btn_shred" tabindex="-1">Manually trigger it!</button></div>
  </fieldset>
  <p style="text-align: center">This application is open source (MIT license) and <a href="https://github.com/JoakimCh/Secure-Password-Scheme">available on GitHub</a> free for anyone to inspect!</p>
  <p style="text-align: center; max-width: 600px;">Developed by Joakim L. Christiansen. Please <a href="https://github.com/sponsors/JoakimCh">sponsor me on GitHub</a>!</p>
</div>

